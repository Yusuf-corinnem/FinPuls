# ============================================
# FinPlus Application Configuration
# ============================================

# Server Configuration
server.port=8080
server.servlet.context-path=/
server.error.include-message=always
server.error.include-binding-errors=always

# Spring Profiles
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}

# ============================================
# Database Configuration
# ============================================
# H2 (по умолчанию для разработки)
spring.datasource.url=${DB_URL:jdbc:h2:mem:finplusdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE}
spring.datasource.driverClassName=${DB_DRIVER:org.h2.Driver}
spring.datasource.username=${DB_USERNAME:sa}
spring.datasource.password=${DB_PASSWORD:}

# JPA/Hibernate Configuration
spring.jpa.database-platform=${DB_PLATFORM:org.hibernate.dialect.H2Dialect}
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true

# H2 Console (только для разработки)
spring.h2.console.enabled=${H2_CONSOLE_ENABLED:true}
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=false

# ============================================
# Logging Configuration
# ============================================
logging.level.root=${LOG_LEVEL:INFO}
logging.level.com.finplus=DEBUG
logging.level.com.finplus.service.bank=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Логи в файл
logging.file.name=logs/finplus.log
logging.file.max-size=10MB
logging.file.max-history=14

# ============================================
# Bank API Configuration
# ============================================
# VTB Bank
bank.vtb.base-url=${VTB_BASE_URL:https://api-vtb.ru}
bank.vtb.name=VTB
bank.vtb.api-version=v1
bank.vtb.access-token=${VTB_ACCESS_TOKEN:}

# Sber Bank
bank.sber.base-url=${SBER_BASE_URL:https://api-sber.ru}
bank.sber.name=SBER
bank.sber.api-version=v1
bank.sber.access-token=${SBER_ACCESS_TOKEN:}

# Tinkoff Bank
bank.tinkoff.base-url=${TINKOFF_BASE_URL:https://api-tinkoff.ru}
bank.tinkoff.name=TINKOFF
bank.tinkoff.api-version=v1
bank.tinkoff.access-token=${TINKOFF_ACCESS_TOKEN:}

# ============================================
# Swagger/OpenAPI Configuration
# ============================================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true
springdoc.api-docs.enabled=true

# ============================================
# Spring Actuator & Prometheus
# ============================================
management.endpoints.web.exposure.include=health,info,prometheus,metrics
management.endpoint.health.show-details=always
management.endpoint.health.probes.enabled=true
management.metrics.export.prometheus.enabled=true
management.server.port=8080

# ============================================
# Application Settings
# ============================================
app.name=FinPlus
app.version=1.0.0
app.description=Financial Pulse Monitor

# Request/Response Settings
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Europe/Moscow

# CORS Configuration (для frontend)
spring.web.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173}
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=true
