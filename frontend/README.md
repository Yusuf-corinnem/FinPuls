## FinPuls Frontend (React + TS + Webpack + PWA)

### Обзор
Фронтенд мультибанка: авторизация, главная панель с картами и балансом, платежи/переводы, история операций, сервисы (продукты, согласия). Бэкенд на Java (эндпоинтов пока нет).

### Технологии
- React 19, TypeScript, react-router-dom, zustand
- axios (клиент API)
- Webpack 5, Workbox (PWA), HtmlWebpackPlugin, CopyWebpackPlugin

### Быстрый старт
1. `npm i`
2. `npm start` → http://localhost:3000
3. Прод: `npm run build`

### Структура (минимум)
- `src/index.tsx` — вход
- `src/App.tsx` — роутинг и гарди
- `src/store/auth.ts` — стор авторизации
- `src/pages/*` — страницы
- `src/types/*` — интерфейсы (barrel `src/types/index.ts`)
- `public/index.html`, `manifest.json` (позже), `icons/*`

---

## Дорожная карта (подробные задачи)

### 0) Основа проекта
- [ ] Обновить `README.md` ссылками на макеты/требования (когда будут)
- [x] Настроить alias импорты (по желанию) в `tsconfig.json` и `webpack.config.js`
- [x] Добавить `.env` схему и `README` про переменные окружения (API_URL и т.п.)

Переменные окружения (создайте файл `.env` в корне проекта по примеру):

```
API_URL=             # базовый URL бэкенда, напр. http://localhost:8080
APP_NAME=FinPuls     # имя приложения (опционально)
```

Алиасы:
- В `tsconfig.json` добавлен `baseUrl` и `paths` для `@/*`
- В `webpack.config.js` добавлен `resolve.alias` для `@`

### 1) Аутентификация (MVP)
- [x] Стор `useAuth` (zustand): `isAuthenticated`, `login`, `password`, методы `setCredentials`, `signIn`, `signOut`
- [x] Страница `Login`:
  - [x] Простейшая форма (логин/пароль) → `signIn()` и редирект `/app`
  - [x] Обработка ошибок (плейсхолдеры до API)
- [x] Гард приватных маршрутов (`RequireAuth`):
  - [x] Редирект неавторизованных на `/login`
  - [x] Кнопка «Выйти» в приватном разделе (вызывает `signOut()` и редирект на `/login`)

### 2) Роутинг
- [ ] Публичный: `/login`
- [ ] Приватный layout `/app/*` (через гард):
  - [ ] `/app` → Главная (Dashboard)
  - [ ] `/app/payments` → Платежи/переводы
  - [ ] `/app/history` → История операций
  - [ ] `/app/services` → Сервисы (список)
  - [ ] `/app/services/products` → Продукты
  - [ ] `/app/services/consents` → Согласия
- [ ] Обработчик «звездочки» → редирект на `/login` или `/app`

### 3) Главная (Dashboard)
- [ ] Верхний блок: приветствие пользователя, общий баланс
- [ ] Список карт (плитки):
  - [ ] Базовая карточка: банк, последние 4 цифры, баланс, валюта
  - [ ] Экшен-иконки: «Пополнить», «Перевести», «Заблокировать» (пока мок)
- [ ] Виджет «Финансовый пульс» (плейсхолдер до аналитики)
- [ ] Быстрые кнопки: «Платежи», «История», «Сервисы»
- [ ] Адаптив: десктоп/мобайл

### 4) Платежи/Переводы (`/app/payments`)
- [ ] Форма перевода:
  - [ ] Выбор источника (свои карты) — мок-данные
  - [ ] Выбор назначения: свой счёт/другая карта/сервис (мок)
  - [ ] Сумма, валюта, комментарий
  - [ ] Валидация (минимальная)
- [ ] Экран подтверждения (модалка или шаг 2)
- [ ] Результат перевода (успех/ошибка — мок)
- [ ] История последних переводов (сайдбар/блок)

### 5) История операций (`/app/history`)
- [ ] Список транзакций (мок): дата, категория, описание, сумма, валюта, статус
- [ ] Фильтры: период, тип операции, карта/счёт
- [ ] Пагинация/ленивая подгрузка (позже)
- [ ] Детали операции (модалка/страница)

### 6) Сервисы (`/app/services`)
- [ ] Список сервисов: «Продукты», «Согласия» (карточки/плитки)
- [ ] Навигация в дочерние страницы

#### 6.1) Продукты (`/app/services/products`)
- [ ] Список продуктов: вклады, кредиты, карты (мок)
- [ ] Детали продукта (модалка/страница)
- [ ] Действия (плейсхолдеры): пополнение, закрытие, изменение условий

#### 6.2) Согласия (`/app/services/consents`)
- [ ] Таблица согласий на доступ к данным/платежам (мок)
- [ ] Статусы: активное/истёкшее/отозвано
- [ ] Действия: отозвать/продлить (мок)

### 7) API-интеграция (когда появятся эндпоинты)
- [ ] Общий axios-инстанс (`src/services/api.ts`): базовый URL, таймаут
- [ ] Интерцептор `Authorization` (при наличии токена)
- [ ] Типы запросов/ответов (`src/types/api.ts`)
- [ ] Сервисы:
  - [ ] auth: `login`, `logout`
  - [ ] cards: `getCards`, `transfer`
  - [ ] history: `getTransactions`
  - [ ] services: `getProducts`, `getConsents`, `revokeConsent`
- [ ] Подмена моков на реальные вызовы

### 8) Состояние и хранение
- [ ] Инициализация авторизации при старте (гидратация из `localStorage`)
- [ ] Вынести повторно используемые селекторы zustand (по мере роста)
- [ ] Обновление стора после успешных запросов (переводы, отозвать согласие и т.п.)

### 9) UI/UX
- [ ] Базовая тема и дизайн‑система (цвета, отступы, типографика)
- [ ] Компоненты: кнопка, инпут, селект, карточка, модалка
- [ ] Скелетоны/лоадеры для списков
- [ ] Пустые состояния (нет карт, нет операций)
- [ ] Сообщения об ошибках (toast/inline)

### 10) PWA
- [ ] `public/manifest.json` (name, short_name, theme_color)
- [ ] Иконки 192x192, 512x512
- [ ] Проверить генерацию SW (Workbox), офлайн‑кеш статики
- [ ] Проверить обновление версий (skipWaiting/clientsClaim настроены)

### 11) Доступность и локализация
- [ ] Базовые aria‑атрибуты для форм и навигации
- [ ] Фокус‑ловушки в модалках
- [ ] Подготовка к i18n (по необходимости)

### 12) Качество
- [ ] Минимальная проверка типов (строгость TS включена)
- [ ] ESLint/Prettier (по желанию позже)
- [ ] Небольшие smoke‑сценарии: вход, переходы, выход

### 13) Сборка и деплой
- [ ] Prod build без ошибок (`npm run build`)
- [ ] Настройка SPA fallback на хостинге (Netlify/Vercel/Nginx)
- [ ] Документация по деплою (url, переменные окружения)

---

## Приоритеты MVP (для хакатона)
1. Авторизация (логин → `/app`), гард приватных страниц
2. Главная: список карт (моки), общий баланс, быстрые переходы
3. Платежи: простая форма перевода (моки) + экран результата
4. История: базовый список транзакций (моки)
5. Сервисы: заглушки «Продукты», «Согласия»
6. PWA: манифест и иконки (установка на телефон жюри)

## Дальше (по наличию API)
- Подключить реальные эндпоинты, убрать моки
- Обработка ошибок/состояний загрузки
- Улучшение UI (анимации, ховер‑состояния, мобильные жесты)


