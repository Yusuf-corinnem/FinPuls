# ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° FinPuls - Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğ¹ ĞŸÑƒĞ»ÑŒÑĞ¾Ğ¼ĞµÑ‚Ñ€

## ğŸ“‹ Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ
1. [ĞĞ±Ñ‰ĞµĞµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ](#Ğ¾Ğ±Ñ‰ĞµĞµ-Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ)
2. [Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº](#Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹-ÑÑ‚ĞµĞº)
3. [ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Backend](#Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°-backend)
4. [ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Frontend](#Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°-frontend)
5. [Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°](#ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°)
6. [ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹](#ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹-ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹)
7. [ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ](#Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ)
8. [API Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²](#api-Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚-Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²)
9. [Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…](#Ğ±Ğ°Ğ·Ğ°-Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
10. [Docker Ğ¸ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ](#docker-Ğ¸-Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ)

---

## ğŸ¯ ĞĞ±Ñ‰ĞµĞµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ

**FinPuls** â€” Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¼Ğ¸ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ°Ğ¼Ğ¸ Ñ Ğ¿Ñ€Ğ¾Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¼ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ¾Ğ¼ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ.

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:
- **Ğ•Ğ´Ğ¸Ğ½Ñ‹Ğ¹ Ğ´ÑÑˆĞ±Ğ¾Ñ€Ğ´** Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¸Ñ… ÑÑ‡ĞµÑ‚Ğ¾Ğ²
- **"Ğ¡ĞµÑ€Ğ´Ñ†ĞµĞ±Ğ¸ĞµĞ½Ğ¸Ğµ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²"** â€” Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ Ğ»Ğ¸ĞºĞ²Ğ¸Ğ´Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
- **ĞĞ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…** Ğ¸Ğ· Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… Ğ±Ğ°Ğ½ĞºĞ¾Ğ²
- **ĞœĞ¾Ğ½ĞµÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ**: Free Ğ²ĞµÑ€ÑĞ¸Ñ + Premium Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° (Pro)

---

## ğŸ›  Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

### Backend
- **Java 17+**
- **Spring Boot 3.x**
- **Spring Data JPA** â€” Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ‘Ğ”
- **H2 Database** â€” in-memory Ğ‘Ğ” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¸Ğ¼ API
- **Spring Security** â€” Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ (Ğ´Ğ»Ñ Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ³Ğ¾ OAuth)
- **Spring AOP** â€” Ğ°ÑĞ¿ĞµĞºÑ‚Ñ‹ Ğ´Ğ»Ñ Ğ¾Ğ±ĞµÑ€Ñ‚ĞºĞ¸ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²
- **MapStruct** â€” Ğ¼Ğ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³ Entity â†” DTO
- **Jakarta Bean Validation** â€” Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
- **OpenFeign** â€” HTTP ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹ Ğ´Ğ»Ñ Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¸Ñ… API
- **SpringDoc OpenAPI** â€” Swagger Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
- **Micrometer + Prometheus** â€” Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸
- **SLF4J + Logback** â€” Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Frontend
- **React 18+** Ñ TypeScript
- **Vite** â€” ÑĞ±Ğ¾Ñ€ĞºĞ°
- **Axios** â€” HTTP ĞºĞ»Ğ¸ĞµĞ½Ñ‚
- **React Query / SWR** â€” ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- **Recharts / Chart.js** â€” Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸ Ğ¸ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- **Tailwind CSS** â€” ÑÑ‚Ğ¸Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (Ğ¸Ğ»Ğ¸ Material-UI)

### Ğ˜Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°
- **Docker** + **Docker Compose**
- **Maven** â€” ÑĞ±Ğ¾Ñ€ĞºĞ° backend
- **Prometheus** â€” ÑĞ±Ğ¾Ñ€ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
- **Nginx** â€” reverse proxy (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)

---

## ğŸ— ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Backend

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ²

```
com.finpuls/
â”œâ”€â”€ config/                      # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ JpaConfig.java
â”‚   â”œâ”€â”€ SwaggerConfig.java
â”‚   â”œâ”€â”€ PrometheusConfig.java
â”‚   â”œâ”€â”€ WebMvcConfig.java        # Ğ˜Ğ½Ñ‚ĞµÑ€Ñ†ĞµĞ¿Ñ‚Ğ¾Ñ€Ñ‹
â”‚   â””â”€â”€ BankProperties.java      # @ConfigurationProperties Ğ´Ğ»Ñ Ğ±Ğ°Ğ½ĞºĞ¾Ğ²
â”‚
â”œâ”€â”€ domain/                      # Ğ”Ğ¾Ğ¼ĞµĞ½Ğ½Ğ°Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ
â”‚   â”œâ”€â”€ model/                   # JPA Entities
â”‚   â”‚   â””â”€â”€ BankToken.java       # Ğ¥Ñ€Ğ°Ğ½Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¸Ğ¼ API
â”‚   â”œâ”€â”€ repository/              # JPA Repositories
â”‚   â”‚   â””â”€â”€ BankTokenRepository.java
â”‚   â””â”€â”€ dto/                     # Data Transfer Objects
â”‚       â”œâ”€â”€ request/
â”‚       â”‚   â”œâ”€â”€ ConnectBankRequest.java
â”‚       â”‚   â””â”€â”€ GetTransactionsRequest.java
â”‚       â”œâ”€â”€ response/
â”‚       â”‚   â”œâ”€â”€ BalanceDTO.java (interface)
â”‚       â”‚   â”œâ”€â”€ TransactionDTO.java (interface)
â”‚       â”‚   â”œâ”€â”€ FinancialHealthDTO.java (interface)
â”‚       â”‚   â”œâ”€â”€ BalanceDTOImpl.java
â”‚       â”‚   â””â”€â”€ TransactionDTOImpl.java
â”‚       â””â”€â”€ internal/
â”‚           â””â”€â”€ BankBalanceResponse.java
â”‚
â”œâ”€â”€ service/                     # Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
â”‚   â”œâ”€â”€ token/
â”‚   â”‚   â”œâ”€â”€ ITokenService.java  # Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ
â”‚   â”‚   â””â”€â”€ TokenService.java
â”‚   â”œâ”€â”€ bank/
â”‚   â”‚   â”œâ”€â”€ BankAdapter.java    # Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ°Ğ´Ğ°Ğ¿Ñ‚ĞµÑ€Ğ°
â”‚   â”‚   â”œâ”€â”€ BankAdapterFactory.java
â”‚   â”‚   â”œâ”€â”€ adapter/
â”‚   â”‚   â”‚   â”œâ”€â”€ VTBAdapter.java
â”‚   â”‚   â”‚   â”œâ”€â”€ SberAdapter.java
â”‚   â”‚   â”‚   â””â”€â”€ TinkoffAdapter.java
â”‚   â”‚   â””â”€â”€ BankConnectionService.java
â”‚   â”œâ”€â”€ aggregation/
â”‚   â”‚   â”œâ”€â”€ IBankAggregationService.java
â”‚   â”‚   â””â”€â”€ BankAggregationFacade.java
â”‚   â”œâ”€â”€ analytics/
â”‚   â”‚   â”œâ”€â”€ IFinancialHealthService.java
â”‚   â”‚   â”œâ”€â”€ FinancialHealthService.java
â”‚   â”‚   â””â”€â”€ strategy/
â”‚   â”‚       â”œâ”€â”€ HealthCalculationStrategy.java
â”‚   â”‚       â”œâ”€â”€ BasicHealthStrategy.java
â”‚   â”‚       â””â”€â”€ AdvancedHealthStrategy.java
â”‚   â”œâ”€â”€ subscription/
â”‚   â”‚   â”œâ”€â”€ ISubscriptionService.java
â”‚   â”‚   â””â”€â”€ SubscriptionService.java
â”‚   â””â”€â”€ ai/
â”‚       â”œâ”€â”€ IAIService.java
â”‚       â””â”€â”€ GigaChatService.java
â”‚
â”œâ”€â”€ api/                         # REST API
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ BankController.java
â”‚   â”‚   â”œâ”€â”€ BalanceController.java
â”‚   â”‚   â”œâ”€â”€ TransactionController.java
â”‚   â”‚   â”œâ”€â”€ FinancialHealthController.java
â”‚   â”‚   â””â”€â”€ AnalyticsController.java
â”‚   â””â”€â”€ response/
â”‚       â”œâ”€â”€ IApiResponse.java    # Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ ĞµĞ´Ğ¸Ğ½Ğ¾Ğ³Ğ¾ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ°
â”‚       â”œâ”€â”€ ApiResponse.java     # Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
â”‚       â”œâ”€â”€ ResponseStatus.java  # Enum (SUCCESS/ERROR)
â”‚       â””â”€â”€ ErrorDetails.java    # Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
â”‚
â”œâ”€â”€ api/exception/               # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
â”‚   â”œâ”€â”€ FinPulsException.java    # Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğµ Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
â”‚   â”œâ”€â”€ BankException.java
â”‚   â”‚   â”œâ”€â”€ BankApiException.java
â”‚   â”‚   â”œâ”€â”€ BankConnectionException.java
â”‚   â”‚   â””â”€â”€ TokenExpiredException.java
â”‚   â”œâ”€â”€ ValidationException.java
â”‚   â”œâ”€â”€ BusinessException.java
â”‚   â”‚   â”œâ”€â”€ SubscriptionRequiredException.java
â”‚   â”‚   â””â”€â”€ BankNotConnectedException.java
â”‚   â”œâ”€â”€ GlobalExceptionHandler.java
â”‚   â””â”€â”€ ValidationExceptionHandler.java
â”‚
â”œâ”€â”€ middleware/                  # Middleware
â”‚   â”œâ”€â”€ RequestIdFilter.java
â”‚   â”œâ”€â”€ RequestLoggingInterceptor.java
â”‚   â”œâ”€â”€ RequestResponseLoggingFilter.java
â”‚   â”œâ”€â”€ CachedBodyHttpServletRequest.java
â”‚   â””â”€â”€ CachedBodyHttpServletResponse.java
â”‚
â”œâ”€â”€ mapper/                      # MapStruct Ğ¼Ğ°Ğ¿Ğ¿ĞµÑ€Ñ‹
â”‚   â”œâ”€â”€ BankTokenMapper.java
â”‚   â”œâ”€â”€ TransactionMapper.java
â”‚   â””â”€â”€ BalanceMapper.java
â”‚
â”œâ”€â”€ validation/                  # ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğµ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ‚Ğ¾Ñ€Ñ‹
â”‚   â”œâ”€â”€ DateRange.java
â”‚   â””â”€â”€ DateRangeValidator.java
â”‚
â”œâ”€â”€ common/                      # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
â”‚   â”œâ”€â”€ RequestContextHolder.java
â”‚   â””â”€â”€ LoggingHelper.java       # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ğ° Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ MDC
â”‚
â””â”€â”€ metrics/                     # Prometheus Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸
    â””â”€â”€ BankMetrics.java
```

### Ğ¡Ğ»Ğ¾Ğ¸ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          REST API Controllers                   â”‚  â† API Layer
â”‚  (BankController, BalanceController, etc.)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Service Layer                      â”‚  â† Business Logic
â”‚  (TokenService, AggregationService, etc.)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Repository Layer (JPA)                 â”‚  â† Data Access
â”‚  (BankTokenRepository)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              H2 Database                        â”‚  â† Database
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Backend

#### 1. **Bank Adapter Pattern**
Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ `BankAdapter` Ğ´Ğ»Ñ ĞµĞ´Ğ¸Ğ½Ğ¾Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ½Ğ¾Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¼Ğ¸ Ğ±Ğ°Ğ½ĞºĞ°Ğ¼Ğ¸:
```java
public interface BankAdapter {
    String getBankName();
    BankBalanceResponse getBalances(String accessToken);
    BankTransactionsResponse getTransactions(String accessToken, LocalDate from, LocalDate to);
    TokenRefreshResponse refreshToken(String refreshToken);
}
```

#### 2. **Token Management**
- Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² Ğ² H2 (in-memory)
- Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ñ‚Ğ¾ĞºĞµĞ½Ğ°: `{access_token, token_type, client_id, expires_in}`
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ€Ğ¾ĞºĞ° Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ñ‚Ğ¾ĞºĞµĞ½Ğ°
- Ğ’ÑĞµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (Ğ±Ğ°Ğ»Ğ°Ğ½ÑÑ‹, Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸) Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ÑÑ‚ÑÑ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ñ‡ĞµÑ€ĞµĞ· API Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğº Ğ±Ğ°Ğ½ĞºĞ°Ğ¼

#### 3. **Financial Health Calculation**
- Ğ Ğ°ÑÑ‡ĞµÑ‚ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ "ÑĞµÑ€Ğ´Ñ†ĞµĞ±Ğ¸ĞµĞ½Ğ¸Ñ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²"
- Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸: Basic (Free) Ğ¸ Advanced (Pro)
- Ğ£Ñ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚: Ğ±Ğ°Ğ»Ğ°Ğ½ÑÑ‹, Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸, Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ¾ÑÑ‰Ğ¸Ğµ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ¸

#### 4. **Subscription Management**
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸ (Free/Pro)
- Feature flags Ğ´Ğ»Ñ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»Ğ°
- AOP Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°

---

## ğŸ¨ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Frontend

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ğ°Ğ¿Ğ¾Ğº

```
frontend/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ index.html
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/              # React ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ common/              # ĞŸĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ğµ
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Footer.tsx
â”‚   â”‚   â”‚   â””â”€â”€ LoadingSpinner.tsx
â”‚   â”‚   â”œâ”€â”€ Dashboard/           # Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SummaryCard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ QuickActions.tsx
â”‚   â”‚   â”œâ”€â”€ FinancialHeartbeat/  # Ğ’Ğ¸Ğ´Ğ¶ĞµÑ‚ "ÑĞµÑ€Ğ´Ñ†ĞµĞ±Ğ¸ĞµĞ½Ğ¸Ğµ"
â”‚   â”‚   â”‚   â”œâ”€â”€ FinancialHeartbeat.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ HeartbeatIndicator.tsx
â”‚   â”‚   â”‚   â””â”€â”€ HealthMetrics.tsx
â”‚   â”‚   â”œâ”€â”€ Banks/               # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ±Ğ°Ğ½ĞºĞ°Ğ¼Ğ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ BankList.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ BankCard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ConnectBankModal.tsx
â”‚   â”‚   â”œâ”€â”€ Transactions/        # Ğ¢Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ TransactionList.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TransactionItem.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TransactionFilters.tsx
â”‚   â”‚   â”‚   â””â”€â”€ TransactionChart.tsx
â”‚   â”‚   â”œâ”€â”€ Balances/            # Ğ‘Ğ°Ğ»Ğ°Ğ½ÑÑ‹
â”‚   â”‚   â”‚   â”œâ”€â”€ BalanceList.tsx
â”‚   â”‚   â”‚   â””â”€â”€ BalanceCard.tsx
â”‚   â”‚   â””â”€â”€ Analytics/           # ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° (Pro)
â”‚   â”‚       â”œâ”€â”€ Analytics.tsx
â”‚   â”‚       â”œâ”€â”€ TrendsChart.tsx
â”‚   â”‚       â””â”€â”€ InsightsPanel.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                   # Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
â”‚   â”‚   â”œâ”€â”€ HomePage.tsx
â”‚   â”‚   â”œâ”€â”€ BanksPage.tsx
â”‚   â”‚   â”œâ”€â”€ TransactionsPage.tsx
â”‚   â”‚   â””â”€â”€ AnalyticsPage.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                # API ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ api.ts               # Axios instance
â”‚   â”‚   â”œâ”€â”€ bankService.ts
â”‚   â”‚   â”œâ”€â”€ balanceService.ts
â”‚   â”‚   â”œâ”€â”€ transactionService.ts
â”‚   â”‚   â””â”€â”€ healthService.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                   # Custom hooks
â”‚   â”‚   â”œâ”€â”€ useBanks.ts
â”‚   â”‚   â”œâ”€â”€ useBalances.ts
â”‚   â”‚   â”œâ”€â”€ useTransactions.ts
â”‚   â”‚   â””â”€â”€ useFinancialHealth.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ store/                   # State management
â”‚   â”‚   â”œâ”€â”€ userStore.ts         # Zustand / Redux
â”‚   â”‚   â””â”€â”€ subscriptionStore.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                   # TypeScript Ñ‚Ğ¸Ğ¿Ñ‹
â”‚   â”‚   â”œâ”€â”€ api.ts               # Ğ¢Ğ¸Ğ¿Ñ‹ Ğ´Ğ»Ñ API Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²
â”‚   â”‚   â”œâ”€â”€ bank.ts
â”‚   â”‚   â”œâ”€â”€ transaction.ts
â”‚   â”‚   â””â”€â”€ user.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                   # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ formatters.ts        # Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ°Ñ‚, Ğ´ĞµĞ½ĞµĞ³
â”‚   â”‚   â”œâ”€â”€ validators.ts        # Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ„Ğ¾Ñ€Ğ¼
â”‚   â”‚   â””â”€â”€ constants.ts         # ĞšĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx                  # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚
â”‚   â””â”€â”€ main.tsx                 # Entry point
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ tailwind.config.js
```

### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Frontend

#### 1. **Dashboard (Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°)**
- Ğ’Ğ¸Ğ´Ğ¶ĞµÑ‚ "Ğ¡ĞµÑ€Ğ´Ñ†ĞµĞ±Ğ¸ĞµĞ½Ğ¸Ğµ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²" (Ğ·ĞµĞ»ĞµĞ½Ñ‹Ğ¹/Ğ¶ĞµĞ»Ñ‚Ñ‹Ğ¹/ĞºÑ€Ğ°ÑĞ½Ñ‹Ğ¹)
- ĞĞ±Ñ‰Ğ¸Ğ¹ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ Ğ²ÑĞµÑ… ÑÑ‡ĞµÑ‚Ğ¾Ğ²
- Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ (Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ±Ğ°Ğ½Ğº, Ğ¿Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸)
- ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸

#### 2. **Financial Heartbeat Widget**
- Ğ˜Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²
- ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸: Ğ»Ğ¸ĞºĞ²Ğ¸Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ, Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñ‹/Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹
- ĞŸÑ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ñ Ğ¾ ĞºĞ°ÑÑĞ¾Ğ²Ñ‹Ñ… Ñ€Ğ°Ğ·Ñ€Ñ‹Ğ²Ğ°Ñ…

#### 3. **Bank Management**
- Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ½Ñ‹Ñ… Ğ±Ğ°Ğ½ĞºĞ¾Ğ²
- ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ±Ğ°Ğ½ĞºĞ°
- ĞÑ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ±Ğ°Ğ½ĞºĞ°

#### 4. **Transactions**
- Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹ Ğ¸Ğ· Ğ²ÑĞµÑ… Ğ±Ğ°Ğ½ĞºĞ¾Ğ²
- Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ´Ğ°Ñ‚Ğµ, ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸, Ğ±Ğ°Ğ½ĞºÑƒ
- Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾ Ğ´Ğ½ÑĞ¼/Ğ½ĞµĞ´ĞµĞ»ÑĞ¼/Ğ¼ĞµÑÑÑ†Ğ°Ğ¼
- Ğ“Ñ€Ğ°Ñ„Ğ¸Ğº Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ¾Ğ² (Pro)

#### 5. **Analytics (Pro only)**
- Ğ“Ğ»ÑƒĞ±Ğ¾ĞºĞ°Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°
- Ğ¢Ñ€ĞµĞ½Ğ´Ñ‹ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ¾Ğ²/Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ¾Ğ²
- Ğ˜Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»ÑŒ
- PDF Ğ¾Ñ‚Ñ‡ĞµÑ‚Ñ‹

---

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
FinPuls/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”‚   â”œâ”€â”€ java/com/finpuls/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ² Ğ²Ñ‹ÑˆĞµ]
â”‚   â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚   â”‚       â”œâ”€â”€ application.properties
â”‚   â”‚   â”‚       â”œâ”€â”€ application-dev.properties
â”‚   â”‚   â”‚       â”œâ”€â”€ application-prod.properties
â”‚   â”‚   â”‚       â”œâ”€â”€ logback-spring.xml
â”‚   â”‚   â”‚       â””â”€â”€ db/migration/  # Liquibase (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
â”‚   â”‚   â””â”€â”€ test/
â”‚   â”œâ”€â”€ pom.xml
â”‚   â””â”€â”€ Dockerfile
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ [ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ²Ñ‹ÑˆĞµ]
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â””â”€â”€ Dockerfile
â”‚
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env.example
â”œâ”€â”€ ARCHITECTURE.md
â”œâ”€â”€ PLAN.md
â””â”€â”€ README.md
```

---

## ğŸ”§ ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### 1. **Ğ•Ğ´Ğ¸Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ² API**

Ğ’ÑĞµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹ Ğ¾Ğ±Ğ¾Ñ€Ğ°Ñ‡Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ Ğ² `IApiResponse<T>`:

```typescript
interface IApiResponse<T> {
  status: "success" | "error";
  data: T;
  message: string;
  error?: {
    code: string;
    message: string;
    context?: Record<string, any>;
  };
  requestId: string;
}
```

### 2. **Request ID**

ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ `requestId`:
- Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¸Ğ»Ğ¸ Ğ¸Ğ· Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ° `X-Request-Id`
- Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ÑÑ Ğ² Ğ¾Ñ‚Ğ²ĞµÑ‚Ğµ
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ² Ğ»Ğ¾Ğ³Ğ°Ñ… Ğ´Ğ»Ñ Ñ‚Ñ€Ğ°ÑÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ¸

### 3. **Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ**

- Jakarta Bean Validation Ğ´Ğ»Ñ Ğ²ÑĞµÑ… DTO
- ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğµ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ‚Ğ¾Ñ€Ñ‹ Ğ´Ğ»Ñ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ñ… ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸ĞµĞ²
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸

### 4. **Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ**

#### ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
- Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· `logging.level.root` Ğ² `application.properties` (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ INFO)
- ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ ÑƒÑ€Ğ¾Ğ²Ğ½Ğ¸: **INFO**, **DEBUG**, **WARN**
- Ğ Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²: Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ»Ğ¾Ğ³Ğ¾Ğ² ÑÑ‚Ğ°Ñ€ÑˆĞµ **2 Ğ½ĞµĞ´ĞµĞ»ÑŒ** (14 Ğ´Ğ½ĞµĞ¹)
- Ğ Ğ°Ğ·Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ»Ğ¾Ğ³Ğ¸ Ğ´Ğ»Ñ Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¸Ñ… API Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğ¼ Ñ„Ğ°Ğ¹Ğ»Ğµ
- Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿ĞµÑ€ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ· Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½ÑƒÑ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ `LOG_LEVEL`

#### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° JSON Ğ»Ğ¾Ğ³Ğ°
Ğ’ÑĞµ Ğ»Ğ¾Ğ³Ğ¸ Ğ¿Ğ¸ÑˆÑƒÑ‚ÑÑ Ğ² JSON Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ Ñ ĞµĞ´Ğ¸Ğ½Ğ¾Ğ¹ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¾Ğ¹:

```json
{
  "level": "info|debug|warn",
  "message": "Log message text",
  "timestamp": "2025-01-20T10:30:45.123+0300",
  "data": {
    "http": {
      "ip": "192.168.1.1",
      "url": "/api/balances",
      "userAgent": "Mozilla/5.0..."
    },
    "source": {
      "file": "com.finpuls.service.BankService",
      "function": "getBalances",
      "line": 45
    },
    "data": {
      "userId": "user123",
      "bankName": "VTB"
    }
  },
  "error": {
    "code": "TOKEN_EXPIRED",
    "context": {
      "bankName": "VTB",
      "userId": "user123"
    },
    "message": "Token expired for bank: VTB",
    "stackTrace": "..."
  }
}
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ:**
- ĞŸĞ¾Ğ»Ğµ `error` Ğ¿Ñ€Ğ¸ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ñ€Ğ¸ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
- ĞŸĞ¾Ğ»Ğµ `error.context` Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² DEBUG Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ
- ĞŸĞ¾Ğ»Ğµ `data.data` ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ»Ğ¾Ğ³Ğ°
- HTTP ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ (`data.http`) Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ñ‡ĞµÑ€ĞµĞ· MDC Ğ² Ğ¸Ğ½Ñ‚ĞµÑ€Ñ†ĞµĞ¿Ñ‚Ğ¾Ñ€Ğ°Ñ…
- Source Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ (`data.source`) Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Logback

#### Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ğ»Ğ¾Ğ³Ğ¾Ğ²
- `logs/finpuls.log` â€” Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ»Ğ¾Ğ³Ğ¸ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
- `logs/bank-api.log` â€” Ğ»Ğ¾Ğ³Ğ¸ Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¸Ñ… API
- Ğ Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ: `logs/finpuls.2025-01-20.log`, `logs/bank-api.2025-01-20.log`
- Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ: 14 Ğ´Ğ½ĞµĞ¹, Ğ¿Ğ¾ÑĞ»Ğµ Ñ‡ĞµĞ³Ğ¾ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ

#### Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
```java
// Ğ’ RequestLoggingInterceptor
LoggingHelper.setHttpContext(request);

// ĞŸÑ€Ğ¸ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ Ñ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
Map<String, Object> logData = new HashMap<>();
logData.put("userId", userId);
logData.put("bankName", bankName);
LoggingHelper.setData(logData);
log.info("Requesting balances");

// ĞŸÑ€Ğ¸ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸
LoggingHelper.setError("TOKEN_EXPIRED", "Token expired", context, isDebugMode);
log.error("Failed to get balances");
```

### 5. **ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Prometheus**

- ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğº Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¸Ğ¼ API
- Ğ’Ñ€ĞµĞ¼Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¸Ñ… API
- ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
- ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ¿Ğ¾ Ñ‚Ğ¸Ğ¿Ğ°Ğ¼ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¾Ğº

---

## ğŸ¯ ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### 1. **Repository Pattern**
JPA Repositories Ğ´Ğ»Ñ Ğ°Ğ±ÑÑ‚Ñ€Ğ°ĞºÑ†Ğ¸Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼

### 2. **Service Layer Pattern**
Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ² ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ñ…, ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€Ñ‹ Ñ‚Ğ¾Ğ½ĞºĞ¸Ğµ

### 3. **Adapter Pattern**
Ğ•Ğ´Ğ¸Ğ½Ğ¾Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ½Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¼Ğ¸ Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¸Ğ¼Ğ¸ API

### 4. **Factory Pattern**
`BankAdapterFactory` Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ½ÑƒĞ¶Ğ½Ğ¾Ğ³Ğ¾ Ğ°Ğ´Ğ°Ğ¿Ñ‚ĞµÑ€Ğ°

### 5. **Strategy Pattern**
Ğ Ğ°Ğ·Ğ½Ñ‹Ğµ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ° Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ (Basic/Advanced)

### 6. **Facade Pattern**
`BankAggregationFacade` Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ¸Ñ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ñ… Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹

### 7. **DTO Pattern**
ĞÑ‚Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Entity Ğ¾Ñ‚ API, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ¾Ğ² Ğ´Ğ»Ñ Ñ‚Ğ¸Ğ¿Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

### 8. **AOP Pattern**
ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¾Ğ±ĞµÑ€Ñ‚ĞºĞ° Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ², Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¾Ğº

---

## ğŸ“Š API Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²

### Ğ£ÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚

```json
{
  "status": "success",
  "data": {
    "userId": "user123",
    "bankName": "VTB",
    "accessToken": "encrypted..."
  },
  "message": "Bank connected successfully",
  "error": null,
  "requestId": "a1b2c3d4e5f6g7h8"
}
```

### ĞÑˆĞ¸Ğ±ĞºĞ°

```json
{
  "status": "error",
  "data": null,
  "message": "Operation failed",
  "error": {
    "code": "TOKEN_EXPIRED",
    "message": "Token expired for bank: VTB",
    "context": {
      "method": "GET",
      "uri": "/api/balances",
      "bankName": "VTB"
    }
  },
  "requestId": "a1b2c3d4e5f6g7h8"
}
```

### ĞÑˆĞ¸Ğ±ĞºĞ° Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸

```json
{
  "status": "error",
  "data": null,
  "message": "Operation failed",
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Validation failed",
    "context": {
      "validationErrors": {
        "userId": "User ID is required",
        "bankName": "Bank must be VTB, SBER or TINKOFF"
      },
      "method": "POST",
      "uri": "/api/banks/connect"
    }
  },
  "requestId": "a1b2c3d4e5f6g7h8"
}
```

---

## ğŸ’¾ Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### H2 In-Memory Database

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ**: Ğ¥Ñ€Ğ°Ğ½Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¸Ğ¼ API.  
**Ğ’ÑĞµ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ** (Ğ±Ğ°Ğ»Ğ°Ğ½ÑÑ‹, Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸) Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ÑÑ‚ÑÑ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ Ñ‡ĞµÑ€ĞµĞ· API Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğº Ğ±Ğ°Ğ½ĞºĞ°Ğ¼.

**Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°: bank_tokens**
```sql
CREATE TABLE bank_tokens (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id VARCHAR(100) NOT NULL,
    access_token VARCHAR(500) NOT NULL,
    token_type VARCHAR(20) NOT NULL DEFAULT 'bearer',
    client_id VARCHAR(100) NOT NULL,
    expires_in INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY unique_user (user_id)
);
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ:**
- `user_id` - Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¸Ğ· Ğ²Ğ½ĞµÑˆĞ½ĞµĞ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
- `access_token` - Ñ‚Ğ¾ĞºĞµĞ½ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°, Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¸Ğ· Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¾Ğ³Ğ¾ API
- `token_type` - Ñ‚Ğ¸Ğ¿ Ñ‚Ğ¾ĞºĞµĞ½Ğ° (Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ "bearer")
- `client_id` - ID ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, "team200")
- `expires_in` - Ğ²Ñ€ĞµĞ¼Ñ Ğ¶Ğ¸Ğ·Ğ½Ğ¸ Ñ‚Ğ¾ĞºĞµĞ½Ğ° Ğ² ÑĞµĞºÑƒĞ½Ğ´Ğ°Ñ…
- Ğ‘Ğ°Ğ»Ğ°Ğ½ÑÑ‹ Ğ¸ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸ **Ğ½Ğµ Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ** Ğ² Ğ‘Ğ”, Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ÑÑ‚ÑÑ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ñ‡ĞµÑ€ĞµĞ· API

---

## âš™ï¸ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

### application.properties

```properties
# Server
server.port=8080

# Database (H2)
spring.datasource.url=jdbc:h2:mem:finpulsdb
spring.datasource.driverClassName=org.h2.Driver
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# Logging
logging.level.root=${LOG_LEVEL:INFO}
logging.level.com.finpuls=DEBUG
logging.level.com.finpuls.service.bank=INFO
logging.file.name=logs/finpuls.log

# Banks Configuration
bank.vtb.base-url=https://api-vtb.ru
bank.vtb.name=VTB

bank.sber.base-url=https://api-sber.ru
bank.sber.name=SBER

bank.tinkoff.base-url=https://api-tinkoff.ru
bank.tinkoff.name=TINKOFF

# Swagger
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html

# Actuator (Prometheus)
management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true
```

### ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

- `LOG_LEVEL` â€” ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (INFO, DEBUG, WARN). ĞŸĞ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ: INFO
- `SPRING_PROFILES_ACTIVE` â€” Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ (dev, prod)
- `VTB_ACCESS_TOKEN` â€” Ñ‚Ğ¾ĞºĞµĞ½ Ğ´Ğ»Ñ VTB API
- `SBER_ACCESS_TOKEN` â€” Ñ‚Ğ¾ĞºĞµĞ½ Ğ´Ğ»Ñ SBER API
- `TINKOFF_ACCESS_TOKEN` â€” Ñ‚Ğ¾ĞºĞµĞ½ Ğ´Ğ»Ñ Tinkoff API

---

## ğŸ³ Docker Ğ¸ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ

### docker-compose.yml

```yaml
version: '3.8'

services:
  backend:
    build: ./backend
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - LOG_LEVEL=${LOG_LEVEL:INFO}
      - VTB_ACCESS_TOKEN=${VTB_ACCESS_TOKEN}
      - SBER_ACCESS_TOKEN=${SBER_ACCESS_TOKEN}
      - TINKOFF_ACCESS_TOKEN=${TINKOFF_ACCESS_TOKEN}
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/actuator/health"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - finpuls-network

  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    environment:
      - VITE_API_URL=http://localhost:8080/api
    depends_on:
      - backend
    networks:
      - finpuls-network

  prometheus:
    image: prom/prometheus:latest
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
    ports:
      - "9090:9090"
    networks:
      - finpuls-network

networks:
  finpuls-network:
    driver: bridge
```

### Backend Dockerfile

```dockerfile
FROM maven:3.9-eclipse-temurin-17 AS build
WORKDIR /app
COPY pom.xml .
COPY src ./src
RUN mvn clean package -DskipTests

FROM eclipse-temurin:17-jre
WORKDIR /app
COPY --from=build /app/target/*.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]
```

### Frontend Dockerfile

```dockerfile
FROM node:18-alpine AS build
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=build /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/conf.d/default.conf
EXPOSE 3000
CMD ["nginx", "-g", "daemon off;"]
```

---

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- Ğ¢Ğ¾ĞºĞµĞ½Ñ‹ Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ğ² Ğ‘Ğ” Ğ² Ğ·Ğ°ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ¼ Ğ²Ğ¸Ğ´Ğµ (Jasypt)
- ĞœĞ°ÑĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ° Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² Ğ»Ğ¾Ğ³Ğ°Ñ…
- Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ²ÑĞµÑ… Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### Ğ‘ÑƒĞ´ÑƒÑ‰ĞµĞµ (OAuth 2.0)
- OAuth 2.0 / OpenID Connect Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğ±Ğ°Ğ½ĞºĞ¾Ğ²
- Ğ¨Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ Spring Vault
- Refresh token rotation

---

## ğŸ“ˆ ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸

### Prometheus Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸
- `bank_api_calls_total` â€” ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğº Ğ±Ğ°Ğ½ĞºĞ°Ğ¼
- `bank_api_errors_total` â€” ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
- `bank_api_response_time_seconds` â€” Ğ²Ñ€ĞµĞ¼Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°
- `http_request_duration_seconds` â€” Ğ²Ñ€ĞµĞ¼Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ HTTP Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
- `subscription_active_users` â€” ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ Ğ¿Ğ¾ Ñ‚Ğ¸Ğ¿Ğ°Ğ¼ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸

### Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

#### ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
- Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· `logging.level.root` Ğ² `application.properties` (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ INFO)
- ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ ÑƒÑ€Ğ¾Ğ²Ğ½Ğ¸: **INFO**, **DEBUG**, **WARN**
- Ğ Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²: Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ»Ğ¾Ğ³Ğ¾Ğ² ÑÑ‚Ğ°Ñ€ÑˆĞµ **2 Ğ½ĞµĞ´ĞµĞ»ÑŒ** (14 Ğ´Ğ½ĞµĞ¹)
- Ğ Ğ°Ğ·Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ»Ğ¾Ğ³Ğ¸ Ğ´Ğ»Ñ Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¸Ñ… API Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğ¼ Ñ„Ğ°Ğ¹Ğ»Ğµ
- Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿ĞµÑ€ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ· Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½ÑƒÑ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ `LOG_LEVEL`

#### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° JSON Ğ»Ğ¾Ğ³Ğ°
Ğ’ÑĞµ Ğ»Ğ¾Ğ³Ğ¸ Ğ¿Ğ¸ÑˆÑƒÑ‚ÑÑ Ğ² JSON Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ Ñ ĞµĞ´Ğ¸Ğ½Ğ¾Ğ¹ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¾Ğ¹:

```json
{
  "level": "info|debug|warn",
  "message": "Log message text",
  "timestamp": "2025-01-20T10:30:45.123+0300",
  "data": {
    "http": {
      "ip": "192.168.1.1",
      "url": "/api/balances",
      "userAgent": "Mozilla/5.0..."
    },
    "source": {
      "file": "com.finpuls.service.BankService",
      "function": "getBalances",
      "line": 45
    },
    "data": {
      "userId": "user123",
      "bankName": "VTB"
    }
  },
  "error": {
    "code": "TOKEN_EXPIRED",
    "context": {
      "bankName": "VTB",
      "userId": "user123"
    },
    "message": "Token expired for bank: VTB",
    "stackTrace": "..."
  }
}
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ:**
- ĞŸĞ¾Ğ»Ğµ `error` Ğ¿Ñ€Ğ¸ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ñ€Ğ¸ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
- ĞŸĞ¾Ğ»Ğµ `error.context` Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² DEBUG Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ
- ĞŸĞ¾Ğ»Ğµ `data.data` ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ»Ğ¾Ğ³Ğ°
- HTTP ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ (`data.http`) Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ñ‡ĞµÑ€ĞµĞ· MDC Ğ² Ğ¸Ğ½Ñ‚ĞµÑ€Ñ†ĞµĞ¿Ñ‚Ğ¾Ñ€Ğ°Ñ…
- Source Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ (`data.source`) Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Logback

#### Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ğ»Ğ¾Ğ³Ğ¾Ğ²
- `logs/finpuls.log` â€” Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ»Ğ¾Ğ³Ğ¸ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
- `logs/bank-api.log` â€” Ğ»Ğ¾Ğ³Ğ¸ Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¸Ñ… API
- Ğ Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ: `logs/finpuls.2025-01-20.log`, `logs/bank-api.2025-01-20.log`
- Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ: 14 Ğ´Ğ½ĞµĞ¹, Ğ¿Ğ¾ÑĞ»Ğµ Ñ‡ĞµĞ³Ğ¾ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ

### Swagger Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
- Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ğ¿Ğ¾ Ğ°Ğ´Ñ€ĞµÑÑƒ: `http://localhost:8080/swagger-ui.html`
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ¸Ğ· Ğ°Ğ½Ğ½Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ğ¹

---

## ğŸš€ Ğ¢Ğ¾Ñ‡ĞºĞ¸ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ

1. **Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ±Ğ°Ğ½ĞºĞ¾Ğ²**: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ `BankAdapter` Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
2. **ĞĞ¾Ğ²Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ**: Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²ÑƒÑ `HealthCalculationStrategy`
3. **Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ğ¸Ğ¿Ñ‹ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¾Ğº**: Ğ Ğ°ÑÑˆĞ¸Ñ€Ğ¸Ñ‚ÑŒ enum `SubscriptionType`
4. **ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° PostgreSQL**: Ğ—Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ H2 Ğ½Ğ° PostgreSQL Ğ² docker-compose
5. **OAuth Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ**: Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ OAuth 2.0 flow Ğ² `BankConnectionService`

